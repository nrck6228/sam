@use "../abstracts/variables" as vars;
@use "../abstracts/mixins" as media;

:root {
    /* ค่าเริ่มต้น */
    --header-height: 90px;
    --breadcrumb-height: 54px;
    --total-top-offset: 144px;
}
.checkout--container {
    position: relative;
    padding: 0 15px;
    margin: 0 auto;
    min-height: calc(100vh - var(--total-top-offset));
    border-top: 1px solid rgba(213, 213, 213, 1);

    &:before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 50%;
        height: 100%;
        background: rgba(245, 245, 245, 1);
        z-index: 10;
        display: none;
        opacity: 0;

        @include media.media-up(lg) {
            display: block;
            opacity: 1;
        }
    }

    .checkout--grid {
        position: relative;
        display: flex;
        flex-direction: column-reverse;
        width: 100%;
        min-height: calc(100vh - var(--total-top-offset));
        margin: 0 auto;
        z-index: 11;

        @include media.media-up(lg) {
            flex-direction: row;
            max-width: 1320px;
        }
    }

    .checkout--main {
        flex: 1;
        display: flex;
        flex-direction: column;
        padding: 2rem;
        background: rgba(245, 245, 245, 1);
        border-right: 1px solid #eee;
    }

    .checkout--sidebar {
        width: 50%;
        padding: 2rem;
    }

    .checkout--section {
        margin-bottom: 2rem;

        &:last-child {
            margin-bottom: 0;
        }

        &__header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            flex-wrap: wrap;
            margin-bottom: 0.5rem;
        }

        &__title {
            margin-bottom: 0;
            font-weight: 600;
            font-size: 1.5rem;
            line-height: 2rem;
            color: black;
            text-transform: uppercase;
        }

        &__link {
            font-weight: 300;
            font-size: 0.875rem;
            line-height: 1.25rem;
            color: black;
            text-decoration: underline;
        }

        &__checkbox {
            font-weight: 300;
            font-size: 0.875rem;
            line-height: 1.25rem;
            color: black;
        }
    }

    .checkout--footer {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        flex-wrap: wrap;
        margin-bottom: 10px;

        &__link {
            font-weight: 300;
            font-size: 0.875rem;
            line-height: 1.25rem;
            color: black;
        }
    }

    .checkout--link {
        display: flex;
        justify-content: flex-start;
        align-items: center;
        flex-wrap: wrap;
        gap: 10px;
        padding: 1.25rem 0 0 0;
        margin-top: auto;
        border-top: 1px solid vars.$light-gray;

        a {
            font-weight: 300;
            font-size: 0.875rem;
            line-height: 1.25rem;
            color: black;
            text-decoration: underline;
            text-underline-offset: 5px;
        }
    }

    .checkout-item {
        display: flex;
        gap: 20px;
        margin-bottom: 3rem;

        &__media {
            position: relative;
            flex-shrink: 1;
            width: 5rem;
        }

        &__link {
            display: block;
            bottom: 0;
            left: 0;
            position: absolute;
            right: 0;
            top: 0;
            width: 100%;
            height: 100%;
        }

        &__image {
            width: 100%;
            max-width: 100%;
            height: auto;
        }

        &__details {
            flex-grow: 1;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            flex-wrap: wrap;
        }

        &__name {
            font-weight: 400;
            font-size: 1rem;
            line-height: 1.5rem;
            color: black;
        }

        &__size {
            font-weight: 400;
            font-size: 0.875rem;
            line-height: 1.5rem;
            color: vars.$gray;
        }

        &__price {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            font-weight: 400;
            font-size: 1rem;
            line-height: 1.5rem;
            color: black;

            .price--sale {
                color: vars.$red;
            }

            .price--old {
                color: vars.$gray
            }
        }

        &__qty {
            position: absolute;
            bottom: -10px;
            right: -10px;
            background: black;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 4px;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    }

    .promo-code {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .coupon-message {
        margin-top: 5px;
        font-size: 0.875rem;
        line-height: 1.25rem;
    }

    .price-summary {
        padding-bottom: 1.5rem;
        margin-bottom: 1.5rem;
        font-weight: 400;
        font-size: 1rem;
        line-height: 1.5rem;
        color: #000;
        border-bottom: 1px solid rgba(213, 213, 213, 1);
    }

    .total-summary {
        font-weight: 600;
        font-size: 1.5rem;
        line-height: 2rem;
        color: black;
        text-transform: uppercase;
    }
    /* ซ่อนบน Desktop */
    .summary-toggle {
        width: 100%;
        padding: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: none;
        border: none;
        color: #000;
        font-size: 14px;
    }

    .summary-toggle__total {
        font-weight: 600;
        font-size: 16px;
    }

    .summary-content-collapse {
        display: none; /* ซ่อนเริ่มต้น */
        overflow: hidden;
        transition: all 0.3s ease;
    }

    .summary-content-collapse.show {
        display: block;
    }
    /* ตกแต่งรายการสินค้าใน Mobile Summary ให้เล็กลงหน่อย */
    #mobile-items-list .checkout-item {
        padding: 10px 0;
        border-bottom: 1px solid #eee;
    }
    /* Sticky Mobile Summary */
    .checkout--mobile-summary {
        position: sticky;
        top: var(--header-height);
        z-index: 1050;
        border-bottom: 1px solid #e1e1e1;
        background: #fafafa;
        margin: 0 -15px 20px -15px; /* ดึงให้เต็มขอบจอ */
    }

    .summary-toggle {
        width: 100%;
        padding: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: none;
        border: none;
        cursor: pointer;
    }
    /* ซ่อนเนื้อหาเริ่มต้น */
    .summary-content-collapse {
        display: none;
        background: #fff;
    }

    .summary-content-collapse.show {
        display: block;
    }
    /* ปรับปรุง Input Group บนมือถือ */
    @media (max-width: 768px) {
        .input-group {
            flex-direction: column;
            gap: 10px !important;
        }

        .input-group > .form-control,
        .input-group > .form-select {
            width: 100% !important;
            border-radius: 4px !important;
        }
    }
    /* ตกแต่งสัญลักษณ์เงินบาทให้ดูพรีเมียม */
    .summary-toggle__total, .total-summary span:last-child {
        font-family: 'Inter', sans-serif; /* หรือ font ที่แสดงสัญลักษณ์ ฿ สวยๆ */
        font-weight: 600;
    }
}